<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hibernate | Apostila Aceleradora</title>
    <meta name="description" content="Primeiros passos na Aceleradora Ágil">
    
    
    <link rel="preload" href="/apostila/assets/css/0.styles.9d1cbbf3.css" as="style"><link rel="preload" href="/apostila/assets/js/app.cebe46fa.js" as="script"><link rel="preload" href="/apostila/assets/js/2.5787c7d3.js" as="script"><link rel="preload" href="/apostila/assets/js/6.3b1a6cca.js" as="script"><link rel="prefetch" href="/apostila/assets/js/10.964b3329.js"><link rel="prefetch" href="/apostila/assets/js/11.14426334.js"><link rel="prefetch" href="/apostila/assets/js/12.b875c82c.js"><link rel="prefetch" href="/apostila/assets/js/13.db34d987.js"><link rel="prefetch" href="/apostila/assets/js/14.163e238e.js"><link rel="prefetch" href="/apostila/assets/js/15.59a0b081.js"><link rel="prefetch" href="/apostila/assets/js/16.56362628.js"><link rel="prefetch" href="/apostila/assets/js/17.e439a097.js"><link rel="prefetch" href="/apostila/assets/js/18.9a935069.js"><link rel="prefetch" href="/apostila/assets/js/19.6e996fbf.js"><link rel="prefetch" href="/apostila/assets/js/20.3a2a8cf6.js"><link rel="prefetch" href="/apostila/assets/js/21.e60afdc3.js"><link rel="prefetch" href="/apostila/assets/js/22.fd32a9db.js"><link rel="prefetch" href="/apostila/assets/js/23.7277dc46.js"><link rel="prefetch" href="/apostila/assets/js/24.3436986c.js"><link rel="prefetch" href="/apostila/assets/js/25.3c3b2774.js"><link rel="prefetch" href="/apostila/assets/js/3.cc4157f4.js"><link rel="prefetch" href="/apostila/assets/js/4.a92d996d.js"><link rel="prefetch" href="/apostila/assets/js/5.bd6799e5.js"><link rel="prefetch" href="/apostila/assets/js/7.bde33f82.js"><link rel="prefetch" href="/apostila/assets/js/8.de04d003.js"><link rel="prefetch" href="/apostila/assets/js/9.9e814c1f.js">
    <link rel="stylesheet" href="/apostila/assets/css/0.styles.9d1cbbf3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/apostila/" class="home-link router-link-active"><!----> <span class="site-name">Apostila Aceleradora</span></a> <div class="links"><!----> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/apostila/" class="sidebar-link">Sumário</a></li><li><a href="/apostila/ferramentas-indispensaveis/comandos-basicos-linux.html" class="sidebar-link">Introdução ao Linux</a></li><li><a href="/apostila/ferramentas-indispensaveis/comandos-basicos-git.html" class="sidebar-link">Introdução ao Git</a></li><li><a href="/apostila/java/introducao-ao-java.html" class="sidebar-link">Introdução ao Java</a></li><li><a href="/apostila/java/orientacao-a-objetos-com-java.html" class="sidebar-link">Orientação a Objetos com Java</a></li><li><a href="/apostila/banco-de-dados/postgresql.html" class="sidebar-link">Começando com PostgreSQL</a></li><li><a href="/apostila/banco-de-dados/migracoes.html" class="sidebar-link">Migrações de banco de dados</a></li><li><a href="/apostila/banco-de-dados/hibernate.html" class="active sidebar-link">Hibernate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/apostila/banco-de-dados/hibernate.html#exercicios-de-fixacao" class="sidebar-link">EXERCÍCIOS DE FIXAÇÃO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/apostila/banco-de-dados/hibernate.html#primeiros-passos-para-mapear-uma-tabela-simples-com-hibernate" class="sidebar-link">Primeiros passos para mapear uma tabela simples com hibernate</a></li></ul></li></ul></li><li><a href="/apostila/mvc-http-e-spring/http.html" class="sidebar-link">HTTP: Como funciona a Web</a></li><li><a href="/apostila/mvc-http-e-spring/padrao-mvc.html" class="sidebar-link">O padrão MVC</a></li><li><a href="/apostila/mvc-http-e-spring/introducao-ao-spring.html" class="sidebar-link">Introdução ao Spring</a></li><li><a href="/apostila/front-end/html.html" class="sidebar-link">HTML</a></li><li><a href="/apostila/front-end/css.html" class="sidebar-link">CSS</a></li><li><a href="/apostila/front-end/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/apostila/front-end/thymeleaf.html" class="sidebar-link">Thymeleaf</a></li><li><a href="/apostila/front-end/bulma.html" class="sidebar-link">Bulma</a></li><li><a href="/apostila/infraestrutura-integracao-e-entrega-continua/heroku.html" class="sidebar-link">Heroku</a></li><li><a href="/apostila/infraestrutura-integracao-e-entrega-continua/docker.html" class="sidebar-link">Docker</a></li><li><a href="/apostila/infraestrutura-integracao-e-entrega-continua/circle-ci.html" class="sidebar-link">Circle CI</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="hibernate"><a href="#hibernate" aria-hidden="true" class="header-anchor">#</a> Hibernate</h1> <p><strong>O que é?</strong></p> <p>O Hibernate é um framework utilizado para mapear as classes java que são suas entidades de negócio para tabelas no banco relacional, economizando tempo.</p> <p><strong>Bibliotecas do Hibernate e JPA</strong></p> <p>Vamos usar o JPA com Hibernate, ou seja, precisamos baixar os JARs no site do Hibernate. O site oficial do Hibernate é o www.hibernate.org, onde você baixa a última versão na seção ORM e Download.</p> <p>Com o ZIP baixado em mãos, vamos descompactar o arquivo. Dessa pasta vamos usar todos os JARs obrigatórios (required). Não podemos esquecer o JAR da especificação JPA que se encontra na pasta jpa.</p> <p>Para usar o Hibernate e JPA no seu projeto é necessário colocar todos esses JARs no classpath.</p> <p>O Hibernate vai gerar o código SQL para qualquer banco de dados. Continuaremos utilizando o banco MySQL, portanto também precisamos o arquivo .jar correspondente ao driver JDBC.</p> <p><strong>Mapeando uma classe Tarefa para nosso Banco de Dados</strong></p> <p>Para isso, continuaremos utilizando a classe que representa uma tarefa:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> br<span class="token punctuation">.</span>com<span class="token punctuation">.</span>caelum<span class="token punctuation">.</span>tarefas<span class="token punctuation">.</span>modelo<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tarefa</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> Long id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String descricao<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> finalizado<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Calendar dataFinalizacao<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Criamos os getters e setters para manipular o objeto, mas fique atento que só devemos usar esses métodos se realmente houver necessidade.</p> <p>Essa é uma classe como qualquer outra que aprendemos a escrever em Java. Precisamos configurar o Hibernate para que ele saiba da existência dessa classe e, desta forma, saiba que deve inserir uma linha na tabela Tarefa toda vez que for requisitado que um objeto desse tipo seja salvo. Em vez de usarmos o termo &quot;configurar&quot;, falamos em mapear uma classe a tabela.</p> <p>Para mapear a classe Tarefa, basta adicionar algumas poucas anotações em nosso código. Anotação é um recurso do Java que permite inserir metadados em relação a nossa classe, atributos e métodos. Essas anotações depois poderão ser lidas por frameworks e bibliotecas, para que eles tomem decisões baseadas nessas pequenas configurações.</p> <p>Para essa nossa classe em particular, precisamos de apenas quatro anotações:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tarefa</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span>
    <span class="token keyword">private</span> Long id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String descricao<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Boolean finalizado<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Temporal</span><span class="token punctuation">(</span>TemporalType<span class="token punctuation">.</span>DATE<span class="token punctuation">)</span>
    <span class="token keyword">private</span> Calendar dataFinalizacao<span class="token punctuation">;</span>

    <span class="token comment">// métodos...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>@Entity</code> indica que objetos dessa classe se tornem &quot;persistivel&quot; no banco de dados.</p> <p><code>@Id</code> indica que o atributo id é nossa chave primária (você precisa ter uma chave primária em toda entidade) e @GeneratedValue diz que queremos que esta chave seja populada pelo banco (isto é, que seja usado um auto increment ou sequence, dependendo do banco de dados).</p> <p>Com <code>@Temporal</code> configuramos como mapear um Calendar para o banco, aqui usamos apenas a data (sem hora), mas poderíamos ter usado apenas a hora (TemporalType.TIME) ou timestamp (TemporalType.TIMESTAMP). Essas anotações precisam dos devidos imports, e pertencem ao pacote javax.persistence.</p> <p>Mas em que tabela essa classe será gravada? Em quais colunas? Que tipo de coluna? Na ausência de configurações mais específicas, o Hibernate vai usar convenções: a classe Tarefa será gravada na tabela de nome também Tarefa, e o atributo descricao em uma coluna de nome descricao também!</p> <p>Se quisermos configurações diferentes das convenções, basta usarmos outras anotações, que são completamente opcionais. Por exemplo, para mapear o atributo dataFinalizacao numa coluna chamada data_finalizado faríamos:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span> <span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;data_finalizado&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> Calendar dataFinalizacao<span class="token punctuation">;</span>
</code></pre></div><p>Para usar uma tabela com o nome tarefas:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span> 
<span class="token annotation punctuation">@Table</span> <span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;tarefas&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tarefa</span>
</code></pre></div><h2 id="exercicios-de-fixacao"><a href="#exercicios-de-fixacao" aria-hidden="true" class="header-anchor">#</a> EXERCÍCIOS DE FIXAÇÃO</h2> <h3 id="primeiros-passos-para-mapear-uma-tabela-simples-com-hibernate"><a href="#primeiros-passos-para-mapear-uma-tabela-simples-com-hibernate" aria-hidden="true" class="header-anchor">#</a> Primeiros passos para mapear uma tabela simples com hibernate</h3> <p>Imagine que temos o hibernate configurado, o próximo passo é realizar o mapeamento das classes ás tabelas do banco de dados.</p> <ol><li>Qual é a anotação que usaremos para indicar que a classe será utilizada como uma entidade, ou seja, que os dados serão &quot;persistiveis&quot; pelo banco de dados?</li> <li>Qual anotação é utilizada para indicar o identificador único da tabela?</li> <li>Qual a notação que informa que queremos que esta chave seja populada pelo banco?</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/apostila/banco-de-dados/migracoes.html" class="prev">
          Migrações de banco de dados
        </a></span> <span class="next"><a href="/apostila/mvc-http-e-spring/http.html">
          HTTP: Como funciona a Web
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/apostila/assets/js/app.cebe46fa.js" defer></script><script src="/apostila/assets/js/2.5787c7d3.js" defer></script><script src="/apostila/assets/js/6.3b1a6cca.js" defer></script>
  </body>
</html>
